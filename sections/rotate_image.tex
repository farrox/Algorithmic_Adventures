% Filename: rotate_image.tex

\problemsection{Rotate Image}
\label{problem:rotate_image}
\marginpar{Rotating images is a common task in computer graphics and image processing.}

The \textbf{Rotate Image} problem involves rotating a given \( n \times n \) 2D matrix representing an image by 90 degrees (clockwise) **in-place**.\marginpar{This problem tests your ability to manipulate 2D arrays and understand matrix transformations.}

\section*{Problem Statement}
You are given an \( n \times n \) 2D matrix representing an image, rotate the image by 90 degrees (clockwise).

**Note:** You have to rotate the image **in-place**, which means you have to modify the input 2D matrix directly. **Do not** allocate another 2D matrix and do the rotation.

\sidenote{\href{https://leetcode.com/problems/rotate-image/}{[LeetCode Link]}\index{LeetCode}}
\sidenote{\href{https://www.geeksforgeeks.org/rotate-a-matrix-by-90-degree-in-clockwise-direction/}{[GeeksForGeeks Link]}\index{GeeksForGeeks}}
\sidenote{\href{https://www.hackerrank.com/challenges/matrix-rotation/problem}{[HackerRank Link]}\index{HackerRank}}
\sidenote{\href{https://app.codesignal.com/challenges/matrix-rotation}{[CodeSignal Link]}\index{CodeSignal}}
\sidenote{\href{https://www.interviewbit.com/problems/rotate-matrix/}{[InterviewBit Link]}\index{InterviewBit}}
\sidenote{\href{https://www.educative.io/courses/grokking-the-coding-interview/RM8y8Y3nLdY}{[Educative Link]}\index{Educative}}
\sidenote{\href{https://www.codewars.com/kata/rotate-image/train/python}{[Codewars Link]}\index{Codewars}}

\section*{Algorithmic Approach}
To rotate the image by 90 degrees clockwise **in-place**, follow these steps:

\begin{enumerate}
    \item \textbf{Transpose the Matrix:}
    \begin{itemize}
        \item Swap elements across the diagonal.
        \item This converts rows to columns.
    \end{itemize}
    
    \item \textbf{Reverse Each Row:}
    \begin{itemize}
        \item Reverse the elements in each row.
        \item This completes the 90-degree rotation.
    \end{itemize}
\end{enumerate}

\section*{Complexities}
\begin{itemize}
    \item \textbf{Time Complexity:} \(O(n^2)\), where \(n\) is the number of rows or columns in the matrix. Each element is visited twice.
    \item \textbf{Space Complexity:} \(O(1)\), as the rotation is performed in-place without using additional memory.
\end{itemize}

\section*{Python Implementation}
\marginpar{In-place operations optimize space usage, crucial for large matrices.}

Below is the complete Python code for rotating a matrix by 90 degrees clockwise using the in-place approach:

\begin{fullwidth}
\begin{lstlisting}[language=Python]
class Solution:
    def rotate(self, matrix: List[List[int]]) -> None:
        """
        Do not return anything, modify matrix in-place instead.
        """
        n = len(matrix)
        
        # Transpose the matrix
        for i in range(n):
            for j in range(i, n):
                matrix[i][j], matrix[j][i] = matrix[j][i], matrix[i][j]
        
        # Reverse each row
        for i in range(n):
            matrix[i].reverse()

# Example Usage:
solution = Solution()
matrix = [
    [1, 2, 3],
    [4, 5, 6],
    [7, 8, 9]
]
solution.rotate(matrix)
print(matrix)  # Output: [[7,4,1],[8,5,2],[9,6,3]]

# Handling Edge Cases:
# Empty Matrix
matrix = []
solution.rotate(matrix)
print(matrix)  # Output: []

# Single Element Matrix
matrix = [[1]]
solution.rotate(matrix)
print(matrix)  # Output: [[1]]
\end{lstlisting}
\end{fullwidth}

\section*{Explanation}
The `rotate` function performs a 90-degree clockwise rotation of the given \( n \times n \) matrix **in-place**. Here's a detailed breakdown:

\begin{itemize}
    \item \textbf{Transposing the Matrix:}
    \begin{itemize}
        \item Iterate through each element above the diagonal (where \( j \geq i \)).
        \item Swap the elements \( matrix[i][j] \) and \( matrix[j][i] \).
        \item This converts the matrix's rows into columns.
    \end{itemize}
    
    \item \textbf{Reversing Each Row:}
    \begin{itemize}
        \item After transposition, each row of the matrix represents a column of the original matrix.
        \item Reverse each row to achieve the 90-degree rotation.
    \end{itemize}
    
    \item \textbf{Final Result:}
    \begin{itemize}
        \item The matrix is now rotated by 90 degrees clockwise without using any additional space.
    \end{itemize}
\end{itemize}

\section*{Why This Approach}
This method is chosen because it:
\begin{itemize}
    \item **Optimizes Space:** Performs the rotation in-place, requiring no extra memory.
    \item **Simplicity:** Breaks down the rotation into two clear, manageable stepsâ€”transposition and row reversal.
    \item **Efficiency:** Achieves the desired rotation with a time complexity of \(O(n^2)\), which is optimal for this problem.
\end{itemize}
\marginpar{In-place algorithms are essential for applications where memory usage is a constraint.}

\section*{Alternative Approaches}
An alternative method involves rotating the matrix layer by layer, swapping elements in groups of four. While this approach also achieves an in-place rotation, it can be more complex to implement compared to the transpose-and-reverse method.\marginpar{Layer-by-layer rotation involves more intricate index management but avoids transposition.}

\section*{Similar Problems to This One}
\begin{itemize}
    \item \hyperref[problem:rotate_image_counter_clockwise]{Rotate Image Counter-Clockwise}\index{Rotate Image Counter-Clockwise}
    \item \hyperref[problem:spiral_matrix]{Spiral Matrix}\index{Spiral Matrix}
    \item \hyperref[problem:set_matrix_zeroes]{Set Matrix Zeroes}\index{Set Matrix Zeroes}
\end{itemize}

\section*{Things to Keep in Mind and Tricks}
\begin{itemize}
    \item \textbf{Matrix Dimensions:} Ensure that the matrix is square (\( n \times n \)) before applying this in-place rotation method.\index{Matrix Dimensions}
    \item \textbf{In-Place Operations:} Modifying the matrix directly helps in saving space but requires careful index management to avoid errors.\index{In-Place Operations}
    \item \textbf{Edge Cases:} Handle special cases like empty matrices or single-element matrices to prevent runtime errors.\index{Edge Cases}
    \item \textbf{Using Python's `reverse()`:} Leveraging built-in functions like `reverse()` can simplify the code and improve readability.\index{Built-in Functions}
\end{itemize}

\section*{Corner and Special Cases to Test When Writing the Code}
\begin{itemize}
    \item \textbf{Empty Matrix:} \texttt{matrix = []}\index{Corner Cases}
    \item \textbf{Single Element Matrix:} \texttt{matrix = [[1]]}\index{Corner Cases}
    \item \textbf{Non-Square Matrices:} Ensure that the algorithm is only applied to square matrices, or modify it to handle non-square matrices appropriately.\index{Corner Cases}
    \item \textbf{Already Rotated Matrices:} Test matrices that are already rotated to ensure idempotency if applicable.\index{Corner Cases}
    \item \textbf{Large Matrices:} Verify performance and correctness with large \( n \times n \) matrices.\index{Corner Cases}
    \item \textbf{Matrices with Duplicate Elements:} Ensure that duplicate values are correctly handled during rotation.\index{Corner Cases}
\end{itemize}

\printindex